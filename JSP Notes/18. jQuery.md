jQuery
=========

## 1. 주요 개념

* 화면의 동적 기능을 자바스크립트보다 좀더 쉽고 편리하게 개발할 수 있게 해주는  
  js 라이브러리

### 1) 특징

* css 선택자를 사용해 각 HTML 태그에 접근해서 작업

```js
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.
                                                min.js" ></script>
<script type="text/javascript">
	function fnProcess() {
		let value = $("#textInput").val()
        /* id로 텍스트 박스 접근하여 val()이용해서 입력값 가져옴*/
		$("#textOutput").val(value) 
        /* id로 텍스트 박스 접근하여 val()이용해서 값을 출력함*/ 
	}
</script>
<title>텍스트에 박스 표시</title>
</head>
<body>
	<input type="text" id="textInput" />
	<input type="button" value="입력하기" onclick="fnProcess()" /><br><br>
	결과 : <br>
	<input type="text" id="textOutput" disabled /> 
</body>
```

![alt](/assets/images/post/ajax/3.png)

## 2. 제이쿼리 Ajax 기능

### 1) Asynchronous javascript and XML

* 비동기 통시(클라이언트와 서버 간)으로 데이터를 주고 받기 위한 기술
* XML이나 JSON데이터를 주고 받는 기술. 요즘은 JSON을 주로 사용
* 웹페이지 전체(UI + data)가 아닌 일부(data)만 업데이트 가능

![alt](/assets/images/post/ajax/5.png)

### 2) 사용 형식

```js
    $.ajax({
        type:'post 또는 get',
        url:  "요청 URL",
        dataType: "전송 받을 데이터 타입",
        data: "서버로 전송할 데이터",
        success: function(){
            // 정상 요청, 서버로 부터 응답이 도착하면 호출될 함수
        },
        error: function(){
            // 오류 발생시 처리 
        },
        complete: function(){
            // 작업 완료 후 처리
        }
    })
```

### 3) ajax 실습

* ajax.html

```html
<title>ajax 테스트</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" ></script>
<script type="text/javascript">
function fnProcess(){
	$.ajax({
		type: "get",
		dataType: "text",	/* 응답 데이터를 텍스트로 지정 */
		url: "http://localhost:8080/chap14_Ajax/ajaxLab",	/* 전송할 서블릿 지정*/
		data: {param:"Hello,jQuery!"},	/* 서버로 매개변수와 값을 설정 */
		success: function(data,textStatus) { /* 전송과 응답이 성공했을경우 작업 설정*/
		    $("#message").append(data)	/* 서버 응답 메세지를 div 엘리먼트에 표신*/
		},
		error: function(data,textStatus){
			alert("에러가 발생했습니다.") /* 작업중 오류 발생했을 경우 수행*/
		},
		complete: function(data,textStatus) {
			alert("작업을 완료했습니다.")	 /*완료시 수행할 작업 설정*/
		}
	})
}
</script>
</head>
<body>
	<input type="button" value="전송하기" onclick="fnProcess()" />
	<div id="message"></div>
</body>
```

* AjaxLab.java

```java
@WebServlet("/ajaxLab")
public class AjaxLab extends HttpServlet {
	
	@Override
	protected void service(HttpServletRequest request, 
    HttpServletResponse response) throws ServletException, IOException {
		request.setCharacterEncoding("utf-8");
		response.setContentType("text/html;charset=utf-8");
		
		String param = request.getParameter("param");	
        // ajax로 전송된 매개변수 가져옴
		System.out.println("From Client : "+param);
		
		PrintWriter out = response.getWriter();
		out.print("안녕하세요. 서버가 보낸 메세지입니다.");	
        // 브라우저(클라이언트)에 응답 메세지 보냄
	}
}

```

![alt](/assets/images/post/ajax/6.png)

### 4) ajax 이용 xml 형식 문서 가져오기

* ajax02.html

```html
<title>ajax 테스트</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" ></script>
<script type="text/javascript">
	function fnProcess() {
		
	$.ajax({
		type: "post",
		url: "http://localhost:8080/chap14_Ajax/ajaxLab02",
		dataType: "xml",	/* 데이터를 XML형태로 받음*/
		success: function(info, textStatus) {
			$(info).find("book").each(function() {
				/* 전송된 XML 데이터에서 엘리먼트 이름으로 데이터를 가져옴 */
				let title = $(this).find("title").text();
				let writer = $(this).find("writer").text();
				let image = $(this).find("image").text();
				
				/* id가 bookInfo인 div 엘리먼트에 도정보를 표시함 */
				$("#bookInfo").append(
						"<p>"+title+"</p>"+	
						"<p>"+writer+"</p>"+	
						"<img src="+image+"/>"	
				)
				
			})
		}
	})
	}
</script>
</head>
<body>
	<div id="bookInfo"></div>
	<input type="button" value="도서정보 요청" onclick="fnProcess()" />
</body>
</html>
```

* AjaxLab02.java

```java
@WebServlet("/ajaxLab02")
public class AjaxLab02 extends HttpServlet {
	
	@Override
	protected void service(HttpServletRequest request, 
    HttpServletResponse response) throws ServletException, IOException {
		
		request.setCharacterEncoding("utf-8");
		response.setContentType("text/html; charset=utf-8");
		
		String result = "";
		PrintWriter out = response.getWriter();
		
		// 도서정보를 xml로 작성한 후 클라이언트로 전송
		result = "<main><book>" +
				"<title><![CDATA[Spring Securit 3/e]]></title>" +
				"<writer><![CDATA[믹 넛슨]]></writer>" +
				"<image><![CDATA[http://localhost:8080/chap14_Ajax/image/
                image2.jpg]]></image>" +
				"</book>"+
				"<book>"+
				"<title><![CDATA[함수형 코틀린]]></title>" +
				"<writer><![CDATA[마리오 아리아스]]></writer>" +
				"<image><![CDATA[http://localhost:8080/chap14_Ajax/image/
                image.jpg]]></image>" +
				"</book>"+
				 "</main>";
		System.out.println(result);
		out.print(result);
	}
}
```

![alt](/assets/images/post/ajax/7.png)
![alt](/assets/images/post/ajax/8.png)


### 5) ajax이용 아이디 중복 체크 여부 e

